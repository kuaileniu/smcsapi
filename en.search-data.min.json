[{"id":0,"href":"/preface/","title":"前言","parent":"欢迎使用文档","content":"更新日期: 2021-09-01\n整体说明     代码组成：本系统采用前端和服务器端分离架构开发，代码库分离； 部署：本系统采用前端和服务器端在研发阶段分开单独部署，交付不同客户时有根据需要有可能集合为一个整体后部署； 域名：前端系统和服务器端系统在研发阶段分别使用不同域名；交付不同客户时根据需要可能采用同一个域名，也有可能采用不同域名；每家客户的域名不同； 域名端口后到第一段路径要求：不要使用 api 或 ws 开始 不可以: https://{domain}:{port}/api/yyyyy 不可以: https://{domain}:{port}/apixxxx/yyyyy;  协议： 根据不同客户需求，系统可能使用 https 协议，也可能使用 http 协议； 域名配置：前端系统采用的域名需告知服务器端工程师，提前在服务器端安全控制体系中配置； 报文体格式：无特殊说明，服务器端返回给客户端的报文体(http body)为json格式；  "},{"id":1,"href":"/auth/","title":"鉴权机制","parent":"欢迎使用文档","content":"更新日期: 2021-09-03\n无需鉴权接口    不需要通过鉴权就能调用的接口有下列\n    获取t ;    生成验证码图片    用户登录;    刷新令牌;     鉴权流程      若http method 为 POST，每次调用服务器端业务接口时，除报文(在body中)主体外需要在http head中携带 access_token(来自于用户登录); 若http method 为 GET，每次调用服务器端业务接口时，需要在url后拼接access_token(来自于用户登录); POST  headers:  KEY: access_token VALUE: 浏览器中存储的access_token值 例如\naccess_token onAJTtFs6wS1Le5KqGXs7FxfdAWby0l73l4GCXRmZWEa1lmAVLadHt7IW4LOOzdOQgfcRRXxo3KrmNoFbZtOMwTOtSS5e5iqlLb%2Bg7BhPGwvN49%2F1vWdGQa4xVM90eU%2Bz7AgRmyxLIPM58T4qpeafY4gZPmiM5SXsp%2BSo4Gb2svwf3iRRnR7Ss158iH1B1OQU9XtCDnZ5XYSbeCdod4xb%2FKbjO92HUAfEr7kcDjuTvo%3D  body：\n{ \u0026#34;key_1\u0026#34;:\u0026#34;val_1\u0026#34;, ...... \u0026#34;key_n\u0026#34;:\u0026#34;val_n\u0026#34; }   GET   https://{domain}:{port}/xxxx/xxxx?access_token=浏览器中存储的access_token值\u0026amp;key_1=val_1  https://{domain}:{port}/xxxx/xxxx?access_token= onAJTtFs6wS1Le5KqGXs7FxfdAWby0l73l4GCXRmZWEa1lmAVLadHt7IW4LOOzdOQgfcRRXxo3KrmNoFbZtOMwTOtSS5e5iqlLb%2Bg7BhPGwvN49%2F1vWdGQa4xVM90eU%2Bz7AgRmyxLIPM58T4qpeafY4gZPmiM5SXsp%2BSo4Gb2svwf3iRRnR7Ss158iH1B1OQU9XtCDnZ5XYSbeCdod4xb%2FKbjO92HUAfEr7kcDjuTvo%3D \u0026amp;key_1=val_1        若系统返回http code为401，则使用 刷新令牌 接口刷新 access_token和refresh_token; 若调用 刷新令牌 返回http code为401则需调用 用户登录 获取access_token 和 refresh_token; 若系统返回http code为401，则需要使用refresh_token(来自于用户登录)调用 保存或更新 访问令牌(access_token) 和 刷新令牌(refresh_token)到客户端或浏览器。 重新发起调用服务器端业务接口;   鉴权流程图：      graph TD 开始--从客户端或浏览器取出访问令牌; 从客户端或浏览器取出访问令牌--成功取出----调用服务器端业务接口; 从客户端或浏览器取出访问令牌----未取出----用户登录; 调用服务器端业务接口 -- POST 方式 Header with access_token ---- 服务器端; 调用服务器端业务接口 -- GET 方式 uri with access_token ---- 服务器端; 服务器端--http code 为200----业务数据 ---- 结束; 服务器端--http code 为401----调用刷新令牌接口; 调用刷新令牌接口 --http code 为200 ---- 更新访问令牌和刷新令牌 ---- 调用服务器端业务接口; 调用刷新令牌接口 --http code 为401 ---- 用户登录; 用户登录 --成功---- 更新访问令牌和刷新令牌; 用户登录 --失败---- 用户登录;    "},{"id":2,"href":"/auth/get_t/","title":"获取t","parent":"鉴权机制","content":"更新日期: 2021-09-05\n基本参数     url : https://{domain}:{port}/api/common/get-t http method : GET  请求数据     request  headers:\nurl: https://xxx.com/api/common/get-t\nbody:\n   返回数据     http code:200  body：\n{ \u0026#34;t\u0026#34;: \u0026#34;1632660520582506\u0026#34; }   http code:204  说明： 前端系统使用的域名未在服务器端预先配置，请联系系统管理人员。\nbody：\n   "},{"id":3,"href":"/auth/captcha/","title":"生成验证码图片","parent":"鉴权机制","content":"更新日期: 2021-09-02\n基本参数     url : https://{domain}:{port}/api/common/captcha?t={} http method : GET  请求数据     request  说明： url中携带 t 的值为调用 获取t 接口获取的值；\n样例： https://xxx.com/api/common/captcha?t=1632660520582506\n  返回数据     http code:200  http headers: content-type: image/png\n图片文件   http code:204  说明： 前端系统使用的域名未在服务器端预先配置，请联系系统管理人员。\nbody：\n   "},{"id":4,"href":"/auth/login/","title":"用户登录","parent":"鉴权机制","content":"更新日期: 2021-09-28\n步骤：      通过 获取t 接口取得t ; 使用t,通过调用 生成验证码图片 接口来生成验证码; 调用 用户登录 接口,获取访问令牌和刷新令牌; 保存访问令牌和保存刷新令牌到客户端或浏览器。   基本参数     url : https://{domain}:{port}/api/common/login http method : POST  请求数据     说明   t ：调用 获取t 接口获取的值； vercode ：调用 生成验证码图片 接口获取的图片中显示的值； username ：用户登录名 password ： 用户登录密码   样例  URL： https://xxx.com/api/common/login\nbody：\n{ \u0026quot;t\u0026quot;: \u0026quot;1234567\u0026quot;, \u0026quot;username\u0026quot;: \u0026quot;15652963646\u0026quot;, \u0026quot;password\u0026quot;: \u0026quot;123456\u0026quot;, \u0026quot;vercode\u0026quot;: \u0026quot;6666\u0026quot; }    返回数据     http code:200  { \u0026quot;code\u0026quot;: 0, \u0026quot;status\u0026quot;: 0, \u0026quot;access_token\u0026quot;: \u0026quot;WVjhtoqU1Nok0iUBAlrj0SsiwH9nv6tcC7dcjwo5XjiQb52bIEG98YvP8uKSIhpG8cBGI8fvHTAhPejPNEPoNg17vAEsBT8xBwlvFOa6mp1tVSIC6H9w%2FimTVefx3rX5OKP0BqXMTtRuBqZjE0UYqhH%2FzLzEv035GeC50RdigctnGOk7miyhsumvnrxNlO6vMAuEnv3hBBTO7cSw2BFerw%2FUZUdxgmCy9rjq1zmCKMH3fSyTYxSC17KWgDUZGkG%2F0Y95Hq8m2fattLTbqJyAXg%3D%3D\u0026quot;, \u0026quot;refresh_token\u0026quot;: \u0026quot;WVjhtoqU1Nok0iUBAlrj0fAtPxSm7atc30xcr%2FhJFx6qLyN8%2FDykjJSjpM4MyJje%2FoYI19mACC3h%2FkbeOYiR%2FQ%3D%3D\u0026quot; }    登录流程图：      graph TD 获取t -- |成功|获取验证码图片 -- |成功|登录 -- |成功|保存访问令牌和保存刷新令牌到客户端或浏览器; 获取t -- |失败|获取t; 获取验证码图片 --|失败|获取t; 用户登录 -- |失败|获取t; 登录 -- |失败|获取t;     "},{"id":5,"href":"/auth/refresh_token/","title":"刷新令牌","parent":"鉴权机制","content":"更新日期: 2021-09-27\n刷新令牌\n"},{"id":6,"href":"/posts/","title":"News","parent":"欢迎使用文档","content":""},{"id":7,"href":"/posts/news_2/","title":"更新二","parent":"News","content":""},{"id":8,"href":"/_includes/","title":"Includes","parent":"欢迎使用文档","content":""},{"id":9,"href":"/_includes/include-page/","title":"Include Page","parent":"Includes","content":"Example page include\nExample Shortcode\nShortcode used in an include page.     Head 1 Head 2 Head 3     1 2 3    "},{"id":10,"href":"/tags/","title":"Tags","parent":"欢迎使用文档","content":""},{"id":11,"href":"/posts/news_1/","title":"更新 一","parent":"News","content":""},{"id":12,"href":"/","title":"欢迎使用文档","parent":"","content":"[![Build Status](https://img.shields.io/drone/build/thegeeklab/hugo-geekdoc?logo=drone\u0026server=https%3A%2F%2Fdrone.thegeeklab.de)](https://drone.thegeeklab.de/thegeeklab/hugo-geekdoc) [![Hugo Version](https://img.shields.io/badge/hugo-0.83-blue.svg)](https://gohugo.io) [![GitHub release](https://img.shields.io/github/v/release/thegeeklab/hugo-geekdoc)](https://github.com/thegeeklab/hugo-geekdoc/releases/latest) [![GitHub contributors](https://img.shields.io/github/contributors/thegeeklab/hugo-geekdoc)](https://github.com/thegeeklab/hugo-geekdoc/graphs/contributors) [![License: MIT](https://img.shields.io/github/license/thegeeklab/hugo-geekdoc)](https://github.com/thegeeklab/hugo-geekdoc/blob/main/LICENSE) -- 为了您能较快使用此文档系统，请仔细阅读功能概述。\n亲，点我，开始吧   功能概述  开始吧  请点击 “亲，点我，开始吧”按钮，查看详细文档。  左上角logo标志  在任何界面时，点击左上角logo则可跳转到首页面。  右上角齿轮图标  点击此处可切换自动/白天/夜间模式。系统在白天时会自动使用白天模式，在夜间时会自动使用夜间模式。如果您愿意的话，您也可以手动进行切换。   右下角 Back to top  点击右下角 Bcck to top ，无论你在当前页的任何位置，都可以快速回到当前页的最顶部。  接口页面的树状菜单使用  进入接口页面后，左侧为树状菜单，菜单的每一级都可点击，点击后右侧主体部分显示相应内容。  祝你工作愉快  少年，一起奋斗吧！   "},{"id":13,"href":"/tags/%E9%89%B4%E6%9D%83/","title":"鉴权","parent":"Tags","content":""}]